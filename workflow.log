2025-02-01 16:47:55,330 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 16:47:55,330 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 16:47:55,330 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: 'EnterpriseConfig' object has no attribute 'get'
2025-02-01 16:47:55,330 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: 'EnterpriseConfig' object has no attribute 'get'
2025-02-01 16:48:29,330 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 16:48:29,330 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 16:48:31,332 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: 'dict' object has no attribute 'invoice_number'
2025-02-01 16:48:31,332 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: 'dict' object has no attribute 'invoice_number'
2025-02-01 16:49:29,603 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 16:49:29,603 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 16:49:29,604 - invoice_agent.utils.audit_logger - ERROR - Error logging audit event: level must be an integer
2025-02-01 16:49:29,604 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: level must be an integer
2025-02-01 16:49:29,604 - invoice_agent.utils.audit_logger - ERROR - Error logging audit event: level must be an integer
2025-02-01 16:49:30,605 - invoice_agent.utils.audit_logger - ERROR - Error logging audit event: level must be an integer
2025-02-01 16:49:30,605 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: level must be an integer
2025-02-01 16:49:30,605 - invoice_agent.utils.audit_logger - ERROR - Error logging audit event: level must be an integer
2025-02-01 16:49:31,607 - invoice_agent.utils.audit_logger - ERROR - Error logging audit event: level must be an integer
2025-02-01 16:49:31,607 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: level must be an integer
2025-02-01 16:49:31,607 - invoice_agent.utils.audit_logger - ERROR - Error logging audit event: level must be an integer
2025-02-01 16:49:31,607 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV1018: level must be an integer
2025-02-01 16:49:31,607 - invoice_agent.utils.audit_logger - ERROR - Error logging audit event: level must be an integer
2025-02-01 16:49:31,607 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: level must be an integer
2025-02-01 16:49:31,607 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: level must be an integer
2025-02-01 16:51:54,860 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 16:51:54,860 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 16:51:54,860 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 16, 51, 54, 860660), due_date=None, vendor_id=None, vendor_name=None, vendor_email=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 16:51:54,860 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1018_normal.pdf
2025-02-01 16:51:54,860 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 16:51:54,860 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 16, 51, 54, 860890), due_date=None, vendor_id=None, vendor_name=None, vendor_email=None, po_number=None, total_amount=5000.0, currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 16:51:54,860 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 16:51:54,861 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '5000.0', 'currency': 'USD', 'errors': ['PO details do not match']}
2025-02-01 16:51:54,861 - invoice_agent.workflow.processor - INFO - Workflow processor service completed successfully
2025-02-01 16:58:54,569 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 16:58:54,569 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 16:58:54,569 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 16, 58, 54, 569533), due_date=None, vendor_id=None, vendor_name=None, vendor_email=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 16:58:54,569 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1018_normal.pdf
2025-02-01 16:58:54,569 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 16:58:54,569 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 16:58:54,569 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 16:58:54,569 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'NoneType' object is not subscriptable
2025-02-01 16:58:54,570 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 16, 58, 54, 569878), due_date=None, vendor_id=None, vendor_name=None, vendor_email=None, po_number=None, total_amount=5000.0, currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 16:58:54,570 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 16:58:54,570 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '5000.0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 16:58:55,571 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 16, 58, 54, 569878), due_date=None, vendor_id=None, vendor_name=None, vendor_email=None, po_number=None, total_amount=5000.0, currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 16:58:55,571 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1018_normal.pdf
2025-02-01 16:58:55,571 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 16:58:55,571 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 16:58:55,571 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 16:58:55,571 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'NoneType' object is not subscriptable
2025-02-01 16:58:55,572 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 16, 58, 55, 571870), due_date=None, vendor_id=None, vendor_name=None, vendor_email=None, po_number=None, total_amount=5000.0, currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 16:58:55,572 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 16:58:55,573 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '5000.0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 16:58:56,574 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 16, 58, 55, 571870), due_date=None, vendor_id=None, vendor_name=None, vendor_email=None, po_number=None, total_amount=5000.0, currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 16:58:56,574 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1018_normal.pdf
2025-02-01 16:58:56,574 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 16:58:56,574 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 16:58:56,574 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 16:58:56,575 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'NoneType' object is not subscriptable
2025-02-01 16:58:56,575 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 16, 58, 56, 574851), due_date=None, vendor_id=None, vendor_name=None, vendor_email=None, po_number=None, total_amount=5000.0, currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 16:58:56,576 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 16:58:56,576 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '5000.0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 16:58:56,577 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV1018: 'NoneType' object is not subscriptable
2025-02-01 16:58:56,577 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 16, 58, 56, 574851), due_date=None, vendor_id=None, vendor_name=None, vendor_email=None, po_number=None, total_amount=5000.0, currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 16:58:56,577 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 16:58:56,577 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '5000.0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 16:58:56,577 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: 'NoneType' object is not subscriptable
2025-02-01 16:58:56,578 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: 'NoneType' object is not subscriptable
2025-02-01 16:59:30,859 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 16:59:30,859 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 16:59:30,859 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 16, 59, 30, 859404), due_date=None, vendor_id=None, vendor_name=None, vendor_email=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 16:59:30,859 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1018_normal.pdf
2025-02-01 16:59:30,859 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 16:59:30,859 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 16:59:30,860 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 16, 59, 30, 859926), due_date=None, vendor_id=None, vendor_name=None, vendor_email=None, po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[{'sku': 'ITEM001', 'description': 'Software License', 'quantity': 5, 'unit_price': Decimal('1000.00'), 'total': Decimal('5000.00')}]), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 16:59:30,860 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 16:59:30,860 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '5000.00', 'currency': 'USD', 'errors': []}
2025-02-01 16:59:30,861 - invoice_agent.workflow.processor - INFO - Workflow processor service completed successfully
2025-02-01 17:00:11,397 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:00:11,398 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:00:11,398 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 0, 11, 398251), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:00:11,398 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1018_normal.pdf
2025-02-01 17:00:11,398 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:00:11,398 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'dict' object has no attribute 'id'
2025-02-01 17:00:11,399 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 0, 11, 398831), due_date=None, vendor_info={'id': 'V001', 'name': 'Tech Solutions Inc.', 'email': 'billing@techsolutions.com'}, po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[{'sku': 'ITEM001', 'description': 'Software License', 'quantity': 5, 'unit_price': Decimal('1000.00'), 'total': Decimal('5000.00')}]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'dict' object has no attribute 'id'"]}}
2025-02-01 17:00:12,400 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 0, 11, 398831), due_date=None, vendor_info={'id': 'V001', 'name': 'Tech Solutions Inc.', 'email': 'billing@techsolutions.com'}, po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='processing', line_items=[{'sku': 'ITEM001', 'description': 'Software License', 'quantity': 5, 'unit_price': Decimal('1000.00'), 'total': Decimal('5000.00')}]), 'metadata': {'status': 'processing'}}
2025-02-01 17:00:12,400 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1018_normal.pdf
2025-02-01 17:00:12,400 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:00:12,401 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'dict' object has no attribute 'id'
2025-02-01 17:00:12,401 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 0, 12, 400961), due_date=None, vendor_info={'id': 'V001', 'name': 'Tech Solutions Inc.', 'email': 'billing@techsolutions.com'}, po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[{'sku': 'ITEM001', 'description': 'Software License', 'quantity': 5, 'unit_price': Decimal('1000.00'), 'total': Decimal('5000.00')}]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'dict' object has no attribute 'id'"]}}
2025-02-01 17:00:13,403 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 0, 12, 400961), due_date=None, vendor_info={'id': 'V001', 'name': 'Tech Solutions Inc.', 'email': 'billing@techsolutions.com'}, po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='processing', line_items=[{'sku': 'ITEM001', 'description': 'Software License', 'quantity': 5, 'unit_price': Decimal('1000.00'), 'total': Decimal('5000.00')}]), 'metadata': {'status': 'processing'}}
2025-02-01 17:00:13,403 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1018_normal.pdf
2025-02-01 17:00:13,403 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:00:13,403 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'dict' object has no attribute 'id'
2025-02-01 17:00:13,404 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 0, 13, 403559), due_date=None, vendor_info={'id': 'V001', 'name': 'Tech Solutions Inc.', 'email': 'billing@techsolutions.com'}, po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[{'sku': 'ITEM001', 'description': 'Software License', 'quantity': 5, 'unit_price': Decimal('1000.00'), 'total': Decimal('5000.00')}]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'dict' object has no attribute 'id'"]}}
2025-02-01 17:00:13,405 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV1018: 'dict' object has no attribute 'name'
2025-02-01 17:00:13,405 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 0, 13, 403559), due_date=None, vendor_info={'id': 'V001', 'name': 'Tech Solutions Inc.', 'email': 'billing@techsolutions.com'}, po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[{'sku': 'ITEM001', 'description': 'Software License', 'quantity': 5, 'unit_price': Decimal('1000.00'), 'total': Decimal('5000.00')}]), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ["'dict' object has no attribute 'name'"]}}
2025-02-01 17:00:13,405 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: 'dict' object has no attribute 'name'
2025-02-01 17:00:13,405 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: 'dict' object has no attribute 'name'
2025-02-01 17:01:30,340 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:01:30,341 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:01:30,341 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 1, 30, 341243), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:01:30,342 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1018_normal.pdf
2025-02-01 17:01:30,342 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:01:30,342 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 17:01:30,342 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:01:30,342 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:01:30,342 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'errors': []}
2025-02-01 17:01:30,344 - invoice_agent.workflow.processor - INFO - Workflow processor service completed successfully
2025-02-01 17:04:41,373 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:04:41,373 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:04:41,373 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 4, 41, 373430), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:04:41,373 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1020_normal.pdf
2025-02-01 17:04:41,374 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:04:41,374 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 17:04:41,374 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:04:41,374 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:04:41,374 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'errors': []}
2025-02-01 17:04:41,375 - invoice_agent.workflow.processor - INFO - Workflow processor service completed successfully
2025-02-01 17:05:26,523 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:05:26,523 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:05:26,524 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 5, 26, 523823), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:05:26,524 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1020_normal.pdf
2025-02-01 17:05:26,524 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:05:26,524 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 17:05:26,524 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:05:26,525 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:05:26,525 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'errors': []}
2025-02-01 17:05:26,525 - invoice_agent.workflow.processor - INFO - Workflow processor service completed successfully
2025-02-01 17:06:14,469 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:06:14,470 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:06:14,470 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 6, 14, 470060), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:06:14,470 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1020_normal.pdf
2025-02-01 17:06:14,470 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:06:14,470 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 17:06:14,470 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1020: 'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'
2025-02-01 17:06:14,470 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'"]}}
2025-02-01 17:06:14,471 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:06:14,471 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'error': "'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'"}
2025-02-01 17:06:15,472 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='processing', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'status': 'processing'}}
2025-02-01 17:06:15,472 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1020_normal.pdf
2025-02-01 17:06:15,472 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:06:15,472 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 17:06:15,472 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1020: 'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'
2025-02-01 17:06:15,473 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'"]}}
2025-02-01 17:06:15,473 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:06:15,473 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'error': "'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'"}
2025-02-01 17:06:16,474 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='processing', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'status': 'processing'}}
2025-02-01 17:06:16,475 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1020_normal.pdf
2025-02-01 17:06:16,475 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:06:16,475 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 17:06:16,475 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1020: 'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'
2025-02-01 17:06:16,475 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'"]}}
2025-02-01 17:06:16,476 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:06:16,476 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'error': "'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'"}
2025-02-01 17:06:16,476 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV1020: 'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'
2025-02-01 17:06:16,476 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ["'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'"]}}
2025-02-01 17:06:16,476 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:06:16,476 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'error': "'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'"}
2025-02-01 17:06:16,476 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: 'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'
2025-02-01 17:06:16,476 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: 'EnhancedInvoiceWorkflowProcessor' object has no attribute '_compare_quantities'
2025-02-01 17:06:51,603 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:06:51,604 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:06:51,604 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 6, 51, 604141), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:06:51,604 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1020_normal.pdf
2025-02-01 17:06:51,604 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:06:51,604 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 17:06:51,605 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:06:51,605 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:06:51,605 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'errors': ["'MockERPConnector' object has no attribute 'schedule_payment'"]}
2025-02-01 17:06:51,606 - invoice_agent.workflow.processor - INFO - Workflow processor service completed successfully
2025-02-01 17:07:38,108 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:07:38,109 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:07:38,109 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 7, 38, 109075), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:07:38,109 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1020_normal.pdf
2025-02-01 17:07:38,109 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:07:38,109 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 17:07:38,110 - invoice_agent.erp.connector - ERROR - Error scheduling payment: 'Invoice' object has no attribute 'get'
2025-02-01 17:07:38,110 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:07:38,110 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:07:38,110 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'errors': ["'Invoice' object has no attribute 'get'"]}
2025-02-01 17:07:38,110 - invoice_agent.workflow.processor - INFO - Workflow processor service completed successfully
2025-02-01 17:08:53,028 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:08:53,029 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:08:53,029 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 8, 53, 29055), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:08:53,029 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1020_normal.pdf
2025-02-01 17:08:53,029 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:08:53,029 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 17:08:53,030 - invoice_agent.erp.connector - INFO - Scheduling payment for invoice: INV1020
2025-02-01 17:08:53,030 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='scheduled', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'status': 'scheduled'}}
2025-02-01 17:08:53,030 - invoice_agent.notification.manager - INFO - Sending notification: invoice_matched
2025-02-01 17:08:53,030 - invoice_agent.notification.manager - INFO - Notification sent: invoice_matched - {'invoice_number': 'INV1020', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'payment_date': '2025-03-03T17:08:53.030233'}
2025-02-01 17:08:53,032 - invoice_agent.workflow.processor - INFO - Workflow processor service completed successfully
2025-02-01 17:10:16,471 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:10:16,472 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:10:16,473 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 10, 16, 472243), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:10:16,473 - invoice_agent.document.processor - INFO - Processing document: uploads/invoice_INV1020_normal.pdf
2025-02-01 17:10:16,473 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:10:16,473 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 17:10:16,473 - invoice_agent.erp.connector - INFO - Scheduling payment for invoice: INV1020
2025-02-01 17:10:16,473 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='scheduled', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))]), 'metadata': {'status': 'scheduled'}}
2025-02-01 17:10:16,473 - invoice_agent.notification.manager - INFO - Sending notification: invoice_matched
2025-02-01 17:10:16,473 - invoice_agent.notification.manager - INFO - Notification sent: invoice_matched - {'invoice_number': 'INV1020', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'payment_date': '2025-03-03T17:10:16.473505'}
2025-02-01 17:10:16,474 - invoice_agent.workflow.processor - INFO - Workflow processor service completed successfully
2025-02-01 17:19:01,240 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:19:01,241 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:19:01,242 - invoice_agent.source.manager - ERROR - Error fetching invoices: 'uploads/invoice_INV1018_normal.pdf' is not in the subpath of '/Users/sailesh/Documents/GitHub/aiagent'
2025-02-01 17:19:01,242 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: 'uploads/invoice_INV1018_normal.pdf' is not in the subpath of '/Users/sailesh/Documents/GitHub/aiagent'
2025-02-01 17:19:01,242 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: 'uploads/invoice_INV1018_normal.pdf' is not in the subpath of '/Users/sailesh/Documents/GitHub/aiagent'
2025-02-01 17:21:51,136 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:21:51,136 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:21:51,137 - invoice_agent.source.manager - ERROR - Error fetching invoices: 'uploads/invoice_INV1018_normal.pdf' is not in the subpath of '/Users/sailesh/Documents/GitHub/aiagent'
2025-02-01 17:21:51,137 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: 'uploads/invoice_INV1018_normal.pdf' is not in the subpath of '/Users/sailesh/Documents/GitHub/aiagent'
2025-02-01 17:21:51,137 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: 'uploads/invoice_INV1018_normal.pdf' is not in the subpath of '/Users/sailesh/Documents/GitHub/aiagent'
2025-02-01 17:22:39,130 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:22:39,130 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:22:39,131 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130918), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:39,131 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:22:39,132 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130918), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:39,132 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:39,132 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1018_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:39,132 - invoice_agent.workflow.processor - ERROR - Failed to process invoice invoice_INV1018_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:39,132 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130918), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:39,132 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:39,132 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1018_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:39,132 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130934), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:39,133 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf
2025-02-01 17:22:39,133 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130934), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:39,133 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:39,133 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1020_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:39,133 - invoice_agent.workflow.processor - ERROR - Failed to process invoice invoice_INV1020_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:39,133 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130934), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:39,133 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:39,133 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1020_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:39,133 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130943), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:39,133 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:22:39,133 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:22:39,134 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130943), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:22:39,134 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:39,134 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:22:39,134 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:22:39,134 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130943), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:22:39,134 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:39,134 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:22:39,134 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130950), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:39,134 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf
2025-02-01 17:22:39,134 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130950), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:39,134 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:39,134 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1019_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:39,134 - invoice_agent.workflow.processor - ERROR - Failed to process invoice invoice_INV1019_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:39,135 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130950), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:39,135 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:39,135 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1019_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:40,134 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130918), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:40,134 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:22:40,135 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130918), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:40,135 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:40,135 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1018_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:40,135 - invoice_agent.workflow.processor - ERROR - Failed to process invoice invoice_INV1018_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:40,136 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130918), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:40,136 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:40,136 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1018_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:40,136 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130934), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:40,136 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf
2025-02-01 17:22:40,136 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130934), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:40,136 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:40,137 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1020_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:40,137 - invoice_agent.workflow.processor - ERROR - Failed to process invoice invoice_INV1020_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:40,137 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130934), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:40,137 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:40,137 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1020_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:40,138 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130943), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:40,138 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:22:40,138 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:22:40,138 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130943), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:22:40,138 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:40,138 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:22:40,139 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:22:40,139 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130943), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:22:40,139 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:40,139 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:22:40,140 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130950), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:40,140 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf
2025-02-01 17:22:40,140 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130950), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:40,140 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:40,140 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1019_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:40,140 - invoice_agent.workflow.processor - ERROR - Failed to process invoice invoice_INV1019_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:40,141 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130950), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:40,141 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:40,141 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1019_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:41,137 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130918), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:41,138 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:22:41,138 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130918), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:41,139 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,139 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1018_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:41,139 - invoice_agent.workflow.processor - ERROR - Failed to process invoice invoice_INV1018_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:41,140 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130918), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:41,140 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,141 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1018_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:41,141 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice invoice_INV1018_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:41,142 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130918), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:41,142 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,142 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1018_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:41,142 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: 'NoneType' object is not subscriptable
2025-02-01 17:22:41,142 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: 'NoneType' object is not subscriptable
2025-02-01 17:22:41,142 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130934), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:41,142 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf
2025-02-01 17:22:41,143 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130934), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:41,143 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,143 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1020_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:41,143 - invoice_agent.workflow.processor - ERROR - Failed to process invoice invoice_INV1020_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:41,143 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130934), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:41,144 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,144 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1020_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:41,144 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice invoice_INV1020_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:41,144 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130934), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:41,144 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,144 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1020_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:41,144 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130943), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:41,144 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:22:41,144 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:22:41,145 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130943), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:22:41,145 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,145 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:22:41,145 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:22:41,145 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130943), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:22:41,146 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,146 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:22:41,146 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:22:41,146 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130943), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:22:41,146 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,146 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:22:41,147 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130950), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[]), 'metadata': {'status': 'processing'}}
2025-02-01 17:22:41,147 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf
2025-02-01 17:22:41,147 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130950), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:41,147 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,147 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1019_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:41,147 - invoice_agent.workflow.processor - ERROR - Failed to process invoice invoice_INV1019_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:41,147 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130950), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:41,148 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,148 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1019_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:22:41,148 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice invoice_INV1019_normal: 'NoneType' object is not subscriptable
2025-02-01 17:22:41,148 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 22, 39, 130950), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[]), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:22:41,149 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:22:41,149 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'invoice_INV1019_normal', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:26,812 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:23:26,812 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:23:26,813 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813268), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:26,813 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:23:26,813 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 17:23:26,814 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 17:23:26,814 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 17:23:26,814 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'NoneType' object is not subscriptable
2025-02-01 17:23:26,814 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:26,814 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:26,814 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:26,814 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813280), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:26,814 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf
2025-02-01 17:23:26,815 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 17:23:26,815 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 17:23:26,815 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 17:23:26,815 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1020: 'NoneType' object is not subscriptable
2025-02-01 17:23:26,815 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:26,815 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:26,815 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:26,815 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813287), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:26,815 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:23:26,815 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:23:26,815 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813287), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:23:26,815 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:26,815 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:23:26,815 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:23:26,816 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813287), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:23:26,816 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:26,816 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:23:26,816 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813293), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:26,816 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf
2025-02-01 17:23:26,816 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 17:23:26,816 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 17:23:26,816 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 17:23:26,816 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1019: 'NoneType' object is not subscriptable
2025-02-01 17:23:26,816 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1019', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:26,816 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:26,816 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1019', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:27,816 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:27,816 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:23:27,816 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 17:23:27,816 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 17:23:27,816 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 17:23:27,816 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'NoneType' object is not subscriptable
2025-02-01 17:23:27,816 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:27,817 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:27,817 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:27,817 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:27,817 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf
2025-02-01 17:23:27,817 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 17:23:27,817 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 17:23:27,817 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 17:23:27,817 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1020: 'NoneType' object is not subscriptable
2025-02-01 17:23:27,817 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:27,818 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:27,818 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:27,818 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813287), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:27,818 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:23:27,818 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:23:27,818 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813287), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:23:27,819 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:27,819 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:23:27,819 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:23:27,819 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813287), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:23:27,819 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:27,819 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:23:27,819 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1019', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:27,819 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf
2025-02-01 17:23:27,819 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 17:23:27,819 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 17:23:27,819 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 17:23:27,819 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1019: 'NoneType' object is not subscriptable
2025-02-01 17:23:27,819 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1019', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:27,819 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:27,819 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1019', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:28,818 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:28,818 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:23:28,819 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 17:23:28,819 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 17:23:28,819 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 17:23:28,819 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'NoneType' object is not subscriptable
2025-02-01 17:23:28,819 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:28,820 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:28,820 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:28,820 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV1018: 'NoneType' object is not subscriptable
2025-02-01 17:23:28,820 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:28,821 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:28,821 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:28,821 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:28,821 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf
2025-02-01 17:23:28,821 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 17:23:28,821 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 17:23:28,821 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 17:23:28,821 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1020: 'NoneType' object is not subscriptable
2025-02-01 17:23:28,821 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:28,822 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:28,822 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:28,822 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV1020: 'NoneType' object is not subscriptable
2025-02-01 17:23:28,822 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:28,822 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:28,822 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:28,822 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: 'NoneType' object is not subscriptable
2025-02-01 17:23:28,822 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: 'NoneType' object is not subscriptable
2025-02-01 17:23:28,823 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813287), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:28,823 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:23:28,823 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:23:28,823 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813287), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:23:28,823 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:28,823 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:23:28,823 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:23:28,824 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813287), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:23:28,824 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:28,824 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:23:28,824 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:23:28,824 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 23, 26, 813287), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:23:28,824 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:28,824 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:23:28,824 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1019', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:23:28,824 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf
2025-02-01 17:23:28,825 - invoice_agent.erp.connector - INFO - Fetching PO data: None
2025-02-01 17:23:28,825 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: None
2025-02-01 17:23:28,825 - invoice_agent.erp.connector - ERROR - Error fetching GR data for PO None: 'NoneType' object is not subscriptable
2025-02-01 17:23:28,825 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1019: 'NoneType' object is not subscriptable
2025-02-01 17:23:28,825 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1019', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:28,825 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:28,825 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1019', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:23:28,825 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV1019: 'NoneType' object is not subscriptable
2025-02-01 17:23:28,825 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1019', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ["'NoneType' object is not subscriptable"]}}
2025-02-01 17:23:28,826 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:23:28,826 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1019', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': "'NoneType' object is not subscriptable"}
2025-02-01 17:24:46,216 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:24:46,216 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:24:46,217 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217013), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:24:46,217 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:24:46,217 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:24:46,217 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:24:46,218 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:24:46,218 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:24:46,219 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217027), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:24:46,219 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf
2025-02-01 17:24:46,219 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:24:46,219 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:24:46,219 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:24:46,220 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:24:46,220 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217034), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:24:46,220 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:24:46,220 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:24:46,221 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217034), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:24:46,221 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:24:46,221 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:24:46,221 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:24:46,221 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217034), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:24:46,222 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:24:46,222 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:24:46,222 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217040), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:24:46,222 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf
2025-02-01 17:24:46,222 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:24:46,222 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1019', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:24:46,222 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:24:46,222 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1019', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:24:47,223 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217034), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:24:47,223 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:24:47,223 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:24:47,224 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217034), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:24:47,225 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:24:47,225 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:24:47,225 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:24:47,225 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217034), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:24:47,226 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:24:47,226 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:24:48,227 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217034), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:24:48,227 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:24:48,227 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:24:48,228 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217034), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:24:48,228 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:24:48,228 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:24:48,228 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:24:48,229 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217034), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:24:48,229 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:24:48,229 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:24:48,229 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:24:48,229 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 24, 46, 217034), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:24:48,229 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:24:48,229 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:24:48,229 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: Could not extract invoice number from filename: INV-000001
2025-02-01 17:24:48,229 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: Could not extract invoice number from filename: INV-000001
2025-02-01 17:25:24,266 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:25:24,266 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:25:24,267 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267183), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:25:24,267 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:25:24,267 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:25:24,268 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:25:24,268 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:25:24,268 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:25:24,269 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267198), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:25:24,269 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf
2025-02-01 17:25:24,269 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:25:24,270 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:25:24,270 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:25:24,270 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:25:24,271 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267208), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:25:24,271 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:25:24,271 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:25:24,271 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267208), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:25:24,271 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:25:24,271 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:25:24,271 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:25:24,271 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267208), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:25:24,272 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:25:24,272 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:25:24,272 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267215), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:25:24,272 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf
2025-02-01 17:25:24,272 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:25:24,272 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1019', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:25:24,273 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:25:24,273 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1019', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:25:25,273 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267208), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:25:25,273 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:25:25,274 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:25:25,274 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267208), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:25:25,275 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:25:25,275 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:25:25,275 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:25:25,275 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267208), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:25:25,275 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:25:25,275 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:25:26,278 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267208), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:25:26,283 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:25:26,286 - invoice_agent.document.processor - ERROR - Error processing document /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf: Could not extract invoice number from filename: INV-000001
2025-02-01 17:25:26,288 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267208), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:25:26,288 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:25:26,288 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:25:26,289 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:25:26,289 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267208), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:25:26,289 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:25:26,289 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:25:26,289 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV-000001: Could not extract invoice number from filename: INV-000001
2025-02-01 17:25:26,289 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 25, 24, 267208), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ['Could not extract invoice number from filename: INV-000001']}}
2025-02-01 17:25:26,289 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:25:26,289 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'error': 'Could not extract invoice number from filename: INV-000001'}
2025-02-01 17:25:26,289 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: Could not extract invoice number from filename: INV-000001
2025-02-01 17:25:26,289 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: Could not extract invoice number from filename: INV-000001
2025-02-01 17:26:55,448 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:26:55,448 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:26:55,450 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 26, 55, 449386), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:26:55,450 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:26:55,450 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:26:55,450 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:26:55,450 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:26:55,451 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:26:55,451 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 26, 55, 449399), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:26:55,451 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf
2025-02-01 17:26:55,451 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:26:55,452 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:26:55,452 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:26:55,452 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:26:55,453 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 26, 55, 449409), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:26:55,453 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:26:55,453 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:26:55,453 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:26:55,454 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:26:55,454 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:26:55,455 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 26, 55, 449415), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:26:55,455 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf
2025-02-01 17:26:55,455 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:26:55,455 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1019', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:26:55,455 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:26:55,455 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1019', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:26:55,456 - invoice_agent.workflow.processor - INFO - Workflow processor service completed successfully
2025-02-01 17:28:21,085 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:28:21,086 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:28:21,087 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 28, 21, 86572), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:28:21,087 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:28:21,087 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:28:21,087 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'confidence_scores'
2025-02-01 17:28:21,087 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'confidence_scores'"]}}
2025-02-01 17:28:21,088 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:28:21,088 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'error': "'confidence_scores'"}
2025-02-01 17:28:21,088 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 28, 21, 86585), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:28:21,088 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf
2025-02-01 17:28:21,088 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:28:21,088 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:28:21,088 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:28:21,089 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:28:21,089 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 28, 21, 86595), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:28:21,089 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:28:21,090 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:28:21,090 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:28:21,090 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:28:21,090 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:28:21,091 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 28, 21, 86601), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:28:21,091 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf
2025-02-01 17:28:21,091 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:28:21,092 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1019', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:28:21,092 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:28:21,092 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1019', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:28:22,088 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='processing', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:28:22,088 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:28:22,089 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:28:22,089 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'confidence_scores'
2025-02-01 17:28:22,090 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'confidence_scores'"]}}
2025-02-01 17:28:22,090 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:28:22,091 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'error': "'confidence_scores'"}
2025-02-01 17:28:23,092 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='processing', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:28:23,093 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:28:23,093 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:28:23,093 - invoice_agent.workflow.processor - ERROR - Failed to process invoice INV1018: 'confidence_scores'
2025-02-01 17:28:23,094 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))], additional_fields={}), 'metadata': {'exception_type': ['PROCESSING_ERROR'], 'description': ["'confidence_scores'"]}}
2025-02-01 17:28:23,094 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:28:23,094 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'error': "'confidence_scores'"}
2025-02-01 17:28:23,094 - invoice_agent.workflow.processor - ERROR - Max retries exceeded for invoice INV1018: 'confidence_scores'
2025-02-01 17:28:23,094 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='exception', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))], additional_fields={}), 'metadata': {'exception_type': ['MAX_RETRIES'], 'description': ["'confidence_scores'"]}}
2025-02-01 17:28:23,094 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:28:23,094 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1018', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'error': "'confidence_scores'"}
2025-02-01 17:28:23,094 - invoice_agent.workflow.processor - ERROR - Failed to process invoices: 'confidence_scores'
2025-02-01 17:28:23,094 - invoice_agent.workflow.processor - ERROR - Workflow processor service failed: 'confidence_scores'
2025-02-01 17:29:12,226 - invoice_agent.workflow.processor - INFO - Starting workflow processor service...
2025-02-01 17:29:12,227 - invoice_agent.source.manager - INFO - Fetching pending invoices
2025-02-01 17:29:12,228 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1018_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 29, 12, 227438), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:29:12,228 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf
2025-02-01 17:29:12,228 - invoice_agent.erp.connector - INFO - Fetching PO data: PO1001
2025-02-01 17:29:12,228 - invoice_agent.erp.connector - INFO - Fetching GR data for PO: PO1001
2025-02-01 17:29:12,228 - invoice_agent.erp.connector - INFO - Scheduling payment for invoice: INV1018
2025-02-01 17:29:12,229 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV1018', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1018_normal.pdf', invoice_date=datetime.datetime(2024, 2, 1, 0, 0), due_date=None, vendor_info=VendorInfo(id='V001', name='Tech Solutions Inc.', email='billing@techsolutions.com'), po_number='PO1001', total_amount=Decimal('5000.00'), currency='USD', status='scheduled', line_items=[LineItem(sku='ITEM001', description='Software License', quantity=5, unit_price=Decimal('1000.00'), total=Decimal('5000.00'))], additional_fields={}), 'metadata': {'status': 'scheduled'}}
2025-02-01 17:29:12,229 - invoice_agent.notification.manager - INFO - Sending notification: invoice_matched
2025-02-01 17:29:12,229 - invoice_agent.notification.manager - INFO - Notification sent: invoice_matched - {'invoice_number': 'INV1018', 'vendor_name': 'Tech Solutions Inc.', 'amount': '5000.00', 'currency': 'USD', 'payment_date': '2025-03-03T17:29:12.229000'}
2025-02-01 17:29:12,230 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1020_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 29, 12, 227451), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:29:12,230 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf
2025-02-01 17:29:12,230 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:29:12,230 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1020', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1020_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:29:12,231 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:29:12,231 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1020', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:29:12,232 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 29, 12, 227459), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:29:12,232 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf
2025-02-01 17:29:12,232 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:29:12,232 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV-000001', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/INV-000001.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:29:12,232 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:29:12,232 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV-000001', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:29:12,234 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_status_change', 'user_id': None, 'data': Invoice(invoice_number='invoice_INV1019_normal', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=datetime.datetime(2025, 2, 1, 17, 29, 12, 227465), due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='processing', line_items=[], additional_fields={}), 'metadata': {'status': 'processing'}}
2025-02-01 17:29:12,234 - invoice_agent.document.processor - INFO - Processing document: /Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf
2025-02-01 17:29:12,234 - invoice_agent.erp.connector - ERROR - No PO number provided
2025-02-01 17:29:12,234 - invoice_agent.utils.audit_logger - INFO - Audit event: {'event_type': 'invoice_exception', 'user_id': None, 'data': Invoice(invoice_number='INV1019', file_path='/Users/sailesh/Documents/GitHub/aiagent/uploads/invoice_INV1019_normal.pdf', invoice_date=None, due_date=None, vendor_info=None, po_number=None, total_amount=Decimal('0'), currency='USD', status='exception', line_items=[], additional_fields={}), 'metadata': {'exception_type': ['PO_MISMATCH'], 'description': ['Purchase order details do not match']}}
2025-02-01 17:29:12,234 - invoice_agent.notification.manager - INFO - Sending notification: invoice_exception
2025-02-01 17:29:12,234 - invoice_agent.notification.manager - INFO - Notification sent: invoice_exception - {'invoice_number': 'INV1019', 'vendor_name': None, 'amount': '0', 'currency': 'USD', 'errors': ['PO not found or invalid']}
2025-02-01 17:29:12,235 - invoice_agent.workflow.processor - INFO - Workflow processor service completed successfully
